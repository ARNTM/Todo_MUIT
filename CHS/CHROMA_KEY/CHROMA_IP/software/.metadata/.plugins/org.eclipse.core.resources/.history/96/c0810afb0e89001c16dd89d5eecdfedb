#include "key_codes.h" 	// define los valores de KEY1, KEY2, KEY3
#include "system.h"
#include "sys/alt_irq.h"

extern volatile int videoEna, imageEna;

void switches_ISR( )
{
	volatile int * slider_switch_ptr = (int *) SWITCHES_BASE;
	volatile int * chromaProcessor_ptr = (int *) CHROMAPROCESSOR_BASE;


	int valor = *(slider_switch_ptr + 3);
	*(slider_switch_ptr + 3) = 0;

	switch(valor) {
	case 1:
		printf("Video Enabled\n");
		if(videoEna == 1) {
		*(chromaProcessor_ptr + 3) = *(chromaProcessor_ptr + 3) + 1;
		videoEna = 0;
		}
		else {
			*(chromaProcessor_ptr + 3) = *(chromaProcessor_ptr + 3) - 1;
		videoEna = 1;
		}
		printf("Switch Value: %d\n", *(chromaProcessor_ptr + 3));
		break;
	case 2:
		printf("Image Enabled\n");
		if(videoEna == 1) {
		*(chromaProcessor_ptr + 3) = *(chromaProcessor_ptr + 3) + 2;
		videoEna = 0;
		}
		else {
			*(chromaProcessor_ptr + 3) = *(chromaProcessor_ptr + 3) - 2;
		videoEna = 1;
		}
		printf("Switch Value: %d\n", *(chromaProcessor_ptr + 3));
		break;
	case 4:
		printf("SW2\n");
		break;
	case 8:
		printf("SW3\n");
		break;
	case 16:
		printf("SW4\n");
		break;
	case 32:
		printf("SW5\n");
		break;
	case 64:
		printf("SW6\n");
		break;
	default:
		printf("Ninguna función asignada\n");
		break;
	}

	return;
}
